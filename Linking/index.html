
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../image/logo.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Linking - Plugin - Mongo</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cc9b2e1e.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Plugin - Mongo" class="md-header__button md-logo" aria-label="Plugin - Mongo" data-md-component="logo">
      
  <img src="../image/delphix-logo-black1x.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Plugin - Mongo
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Linking
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Plugin - Mongo" class="md-nav__button md-logo" aria-label="Plugin - Mongo" data-md-component="logo">
      
  <img src="../image/delphix-logo-black1x.svg" alt="logo">

    </a>
    Plugin - Mongo
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../InstallPlugin/" class="md-nav__link">
        Install Plugin
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Requirements
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Requirements" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Requirements
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/SupportMatrix/" class="md-nav__link">
        Support Matrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/Source/" class="md-nav__link">
        Source Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/Staging/" class="md-nav__link">
        Staging Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/Target/" class="md-nav__link">
        Target Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/NetworkPorts/" class="md-nav__link">
        Network Port Requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Discovery/" class="md-nav__link">
        Discovery
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Linking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Linking
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-sourceconfig" class="md-nav__link">
    Create Sourceconfig
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-dsource" class="md-nav__link">
    Create dSource
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsource-parameters" class="md-nav__link">
    dSource Parameters
  </a>
  
    <nav class="md-nav" aria-label="dSource Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#expected-backup-types-for-each-dsource-type" class="md-nav__link">
    Expected backup types for each dsource type:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Provisioning/" class="md-nav__link">
        Provisioning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Operations/" class="md-nav__link">
        Operations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Upgrades
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Upgrades" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Upgrades
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Upgrades/UpgradePlugin/" class="md-nav__link">
        Upgrade Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Upgrades/UpgradeDsource/" class="md-nav__link">
        Upgrade dSource
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Upgrades/UpgradeVDB/" class="md-nav__link">
        Upgrade VDB
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Limitations/" class="md-nav__link">
        Limitations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Release Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_1" type="checkbox" id="__nav_11_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_1">
          1.2.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.2.0" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_1">
          <span class="md-nav__icon md-icon"></span>
          1.2.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/1.2.0/Release-v1.2.0/" class="md-nav__link">
        Release-v1.2.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_2" type="checkbox" id="__nav_11_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          1.1.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.1.0" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          1.1.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/1.1.0/Release-v1.1.0/" class="md-nav__link">
        Release-v1.1.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_3" type="checkbox" id="__nav_11_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3">
          1.0.2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.0.2" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_3">
          <span class="md-nav__icon md-icon"></span>
          1.0.2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/1.0.2/Release-v1.0.2/" class="md-nav__link">
        Release-v1.0.2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_4" type="checkbox" id="__nav_11_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_4">
          1.0.1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.0.1" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_4">
          <span class="md-nav__icon md-icon"></span>
          1.0.1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/1.0.1/Release-v1.0.1/" class="md-nav__link">
        Release-v1.0.1
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_5" type="checkbox" id="__nav_11_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_5">
          1.0.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.0.0" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_5">
          <span class="md-nav__icon md-icon"></span>
          1.0.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/1.0.0/Release-v1.0.0/" class="md-nav__link">
        Release-v1.0.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-sourceconfig" class="md-nav__link">
    Create Sourceconfig
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-dsource" class="md-nav__link">
    Create dSource
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsource-parameters" class="md-nav__link">
    dSource Parameters
  </a>
  
    <nav class="md-nav" aria-label="dSource Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#expected-backup-types-for-each-dsource-type" class="md-nav__link">
    Expected backup types for each dsource type:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="linking">Linking</h1>
<p>Linking a data source will create a dSource object on the engine and allow Delphix to ingest data from this source. The dSource is an object that the Delphix Virtualization Engine uses to create and update virtual copies of your database. </p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Install delphix engine 7.0 and above  </li>
<li>Install mongo binaries on staging host  </li>
<li>Execute Discovery on staging host</li>
<li>For shardedsource(Cluster to Cluster Sync),<ul>
<li>Please refer the following pre-requisites and limitations<ul>
<li><a href="https://www.mongodb.com/docs/cluster-to-cluster-sync/current/reference/permissions">User Permissions</a>(syncType: default, Target: source cluster) for 
     the source cluster.</li>
<li><a href="https://www.mongodb.com/docs/cluster-to-cluster-sync/current/reference/limitations/">Limitations</a></li>
</ul>
</li>
<li>For larger datasets,<ul>
<li>Physical RAM size should atleast be 64GB or greater on the staging 
   host.</li>
<li>Refer <a href="https://www.mongodb.com/docs/cluster-to-cluster-sync/current/reference/oplog-sizing/">Oplog size requirements</a> for the source cluster.</li>
<li>To limit the MongoDB memory utilisation at staging cluster, set the following 
   parameter with appropriate value, in the &ldquo;Set Parameter&rdquo; section of 
   &ldquo;Add dSource&rdquo; UI page.<ul>
<li><em>wiredTigerCacheSizeGB</em></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="create-sourceconfig">Create Sourceconfig</h2>
<p>Every environment contains <code>repositories</code> and each environment may have any number of repositories associated with it. <code>Repository</code> represents the binaries for mongo instance. Each repository can have many <code>SourceConfig</code> which represent mongo instance. There is no sourceconfig generated automatically in mongo-plugin. We need to configure <code>SourceConfig</code> objects through which we can create a dSource. </p>
<ol>
<li>Login to the <strong>Delphix Management application</strong>.</li>
<li>Click <strong>Manage</strong>.</li>
<li>Select <strong>Environments</strong>.</li>
<li>Select the repository</li>
<li>
<p>Click on <strong><code>+</code></strong> icon ( Shown in next image )</p>
<p><img alt="Screenshot" src="../image/mongo_discovery.png" /></p>
</li>
<li>
<p>Add required details in <strong>Add database</strong> section.  </p>
</li>
<li><strong><code>identity field</code></strong>: Proivide unique name for staging database</li>
<li><strong><code>discoveryType</code></strong>: Keep it as manual</li>
<li>
<p>Click <strong>Add</strong> button</p>
<p><img alt="Screenshot" src="../image/source_cfg.png" /></p>
</li>
</ol>
<h2 id="create-dsource">Create dSource</h2>
<p>dSource is delphix representation of source database copy. Following are the steps to create dSource.</p>
<ol>
<li>Login to <strong>Delphix Management application</strong>.</li>
<li>Click <strong>Manage</strong> &gt;  <strong>Datasets</strong></li>
<li>Click on <strong>Add dSource</strong>.
    <img alt="Screenshot" src="../image/add_dsource.png" /></li>
<li>In the Add dSource wizard, select the mongo source config you just created on the staging host.</li>
<li>Select the dSource type from the drop-down available on dSource wizard. Refer different <a href="https://delphix.github.io/mongo-plugin/index.html#ingestion-types">dSource Types</a>  </li>
<li>Enter the mongo-specific parameters for your dSource configuration.  </li>
<li>Proceed with wizard and submit to create dSource.  </li>
</ol>
<p><strong>Note:</strong> For stagingpush dSource Type, Please ignore 1st snapshot. Once the staging instance is created by user, take a new snapshot and delete all previous snapshots to avoid empty datafile/file provisioning.</p>
<h2 id="dsource-parameters">dSource Parameters</h2>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Description</th>
<th align="left">dSource Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">dSource Type</td>
<td align="left">Type of dSource</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Source MongoDB Host Connect String</td>
<td align="left">Source Instance Connect String / Mongos Connection String (sharded mongosync) / Staging Instance Connect String (for stagingpush)</td>
<td align="left">onlinemongodump, extendedcluster</td>
</tr>
<tr>
<td align="left">Replicaset Name</td>
<td align="left">Source Replicaset name (for RESTORE MONGO DATABASE BACKUP USING MONGO OPS MANAGER [ NON-SHARDED ONLY ])</td>
<td align="left">stagingpush</td>
</tr>
<tr>
<td align="left">MongoDB Source Database User</td>
<td align="left">Source database user / Staging Instance Connect String (for stagingpush)</td>
<td align="left">onlinemongodump, extendedcluster</td>
</tr>
<tr>
<td align="left">MongoDB Password</td>
<td align="left">Source database password / Staging Instance Connect String (for stagingpush)</td>
<td align="left">onlinemongodump, extendedcluster</td>
</tr>
<tr>
<td align="left">Cluster to Cluster Sync (ONLY for shardedsource)</td>
<td align="left">Check box to enable cluster to cluster sync between source and staging cluster (for shardedsource)</td>
<td align="left">shardedsource</td>
</tr>
<tr>
<td align="left">Mongosync Port Number (ONLY for Cluster to Cluster Sync)</td>
<td align="left">Available port for mongosync utility of staging host (Mandatory for cluster-to-cluster sync)</td>
<td align="left">shardedsource</td>
</tr>
<tr>
<td align="left">Capture oplogs of replicaset (ONLY for onlinemongodump)</td>
<td align="left">Capture oplogs while running online mongodump</td>
<td align="left">onlinemongodump</td>
</tr>
<tr>
<td align="left">Staging MongoDB Host</td>
<td align="left">Staging host for creating dSource</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Staging Port</td>
<td align="left">Staging host Port for Mongo dSource Instance</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Mongos Port</td>
<td align="left">Port to be used for mongos router instance</td>
<td align="left">shardedsource</td>
</tr>
<tr>
<td align="left">bindIP String</td>
<td align="left">IP Binding - default 0.0.0.0</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Oplog Size</td>
<td align="left">Size of oplogs</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Journal commit Interval</td>
<td align="left">Journal commit Internal in ms</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Storage Engine</td>
<td align="left">Storage Engine - wiredTiger</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Mount Path</td>
<td align="left">Mount Path for dsource mongo instance datafiles</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Backup Metadata File Name</td>
<td align="left">File that contains backup datetime - Content : MMDDYYYY_HH24MISS</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump</td>
</tr>
<tr>
<td align="left">Mongo Admin User</td>
<td align="left">Mongo Admin User on Staging Host</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">MongoDB Password</td>
<td align="left">Mongo Admin User Password on Staging Host</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Config Server Backup File (sharded mongo) <br> replicaset backup file (nonsharded mongo) <br> Backup directory for Mongodump</td>
<td align="left">Config Server Backup File Name <br> replicaset backup file (nonsharded mongo) <br> Backup directory for Mongodump <br> Refer: <a href="#backup_formats">backup formats</a></td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump</td>
</tr>
<tr>
<td align="left">Shard Backup Files</td>
<td align="left">Shard Backup File Full Path. Add File for each Shard. 1 file per shard <br> Refer: <a href="#backup_formats">backup formats</a></td>
<td align="left">shardedsource</td>
</tr>
<tr>
<td align="left">Enable SSL/TLS</td>
<td align="left">Enable SSL/ TLS</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">SSL/TLS Parameters</td>
<td align="left">SSL/TLS Parameters (e.g. tlsMode, tlsCAFile, tlsPEMKeyFile, sslAllowConnectionsWithoutCertificates etc)</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Enable Authentication</td>
<td align="left">Enable Authentication</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">keyfile_path</td>
<td align="left">KeyAuth keyfile name (Full Path)</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Cluster Auth Mode</td>
<td align="left">None, keyFile, x509, sendKeyFile, sendX509</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Source is Encrypted</td>
<td align="left">Does source mongo instance use encryption ?</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed, stagingpush</td>
</tr>
<tr>
<td align="left">Source Encryption Method</td>
<td align="left">KeyFile, KMIP</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Local Encryption Keyfile</td>
<td align="left">Full path of KeyFile if used for encryption</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">KMIP Parameters</td>
<td align="left">KMIP Parameter details ( e.g. kmipClientCertificateFile, kmipPort, kmipServerCAFile, kmipServerName )</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Enable LDAP</td>
<td align="left">Enable LDAP Authentication / Authorization</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">LDAP Parameters</td>
<td align="left">LDAP Parameter details ( e.g. ldapBindMethod, ldapQueryPassword, ldapServers, ldapTimeoutMS )</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Enable Auditlog</td>
<td align="left">Enable Auditlog Parameters</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Auditlog Parameters</td>
<td align="left">Auditlog Parameter details ( e.g. auditDestination, auditFilter )</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Enable SetParams</td>
<td align="left">Enable SetParams</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">SetParams Parameters</td>
<td align="left">SetParams Parameter details ( e.g. authenticationMechanisms, opensslCipherConfig )</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Client Certificate for Mongos / Mongo Session on Primary Node</td>
<td align="left">Client Certificate for Mongos / Mongo Session on Primary Node</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
<tr>
<td align="left">Client CA Certificate for Mongos / Mongo Session on Primary Node</td>
<td align="left">Client CA Certificate for Mongos / Mongo Session on Primary Node</td>
<td align="left">shardedsource, nonshardedsource, offlinemongodump, onlinemongodump, extendedcluster, seed. stagingpush</td>
</tr>
</tbody>
</table>
<p>Following Sections are in form of <code>Parameter Name</code> and <code>Value</code> format. Add as many parameters needed by clicking on <code>+Add</code> button.  </p>
<pre><code>-   SSL/TLS Parameters  
-   KMIP Parameters  
-   LDAP Parameters  
-   Auditlog Parameters  
-   SetParams Parameters
</code></pre>
<p><strong>Note:</strong>  </p>
<ul>
<li>Any parameters specified for above section need to be compatible with <code>mongod</code> / <code>mongos</code> command line parameters.  </li>
<li>Please refer <a href="https://www.mongodb.com/docs/v5.0/reference/configuration-file-settings-command-line-options-mapping/#std-label-conf-file-command-line-mapping">Mongo Documentation</a> for appropriate names of parameters.  </li>
<li>Please do not specify &ldquo;&ndash;&rdquo; when adding any parameters.  </li>
<li>Sample Parameters are as below for SSL/TLS Parameters section<ul>
<li>tlsMode  </li>
<li>tlsCAFile  </li>
<li>tlsPEMKeyFile  </li>
<li>sslAllowConnectionsWithoutCertificates  </li>
</ul>
</li>
</ul>
<h3 id="expected-backup-types-for-each-dsource-type"><a id="backup_formats"></a>Expected backup types for each dsource type:</h3>
<table>
<thead>
<tr>
<th align="left">dSource Type</th>
<th align="center">Backup format</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">shardedsource</td>
<td align="center">tar backup files from Mongo Ops Manager (one for config server and one for each shard)</td>
</tr>
<tr>
<td align="left">nonshardedsource</td>
<td align="center">tar backup files from Mongo Ops Manager (one for replicaset server)</td>
</tr>
<tr>
<td align="left">offlinemongodump</td>
<td align="center">Mongodump backup directory (one for replicaset server)</td>
</tr>
</tbody>
</table>
<p>For dSource type of offlinemongodump, nonshardedsource and shardedsource (without cluster to cluster sync), Backup Metadata File parameter is mandatory. Content of this file should be a single line datetime value specified in format of MMDDYYYY_HH24MISS. This content lets delphix know if there is any new backup uploaded on staging host, different from previous snapshot. Delphix checks this file based on snapsync policy to find if new backup is available for ingestion. No other checks on backups are done. If date is updated, delphix assumes there are new backup files available in backup location. Delphix will reingest backup and take new snapshot.  </p>
<p>This file need to be updated manually OR as a part of backup/copy script. Following command can be added to backup script that will be executed as soon as the backup is successful or backup copy is successful.<br />
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s2">&quot;`date &#39;+%m%d%Y_%H%M%S&#39;`&quot;</span> &gt;  /FULL_PATH_TO_METADATA_FILE/mongo_bkp_metadata.txt  
</code></pre></div>
File name and path can be any as per orgnanization standard naming convention.</p>
<p>For shardedmongo, 1 configserver backup file and 1 backup file per shard is expected. It is important to keep name of backup files same for every new backup. If the file names are changed, it need to be updated in GUI parameters every time a new backup is uploaded. It is recommended to use some standard naming convention for sharded backups.<br />
Sample as below. 
<div class="highlight"><pre><span></span><code>-   configsvr_bkp.tar.gz  
-   myShard_n_bkp.tar.gz ( where n = 0 to total number of shards )  
</code></pre></div></p>
<p>e.g.<br />
<div class="highlight"><pre><span></span><code>-   configsvr_bkp.tar.gz
-   myShard_0_bkp.tar.gz
-   myShard_1_bkp.tar.gz 
-   myShard_2_bkp.tar.gz
</code></pre></div></p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Discovery/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Discovery" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Discovery
            </div>
          </div>
        </a>
      
      
        
        <a href="../Provisioning/" class="md-footer__link md-footer__link--next" aria-label="Next: Provisioning" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Provisioning
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a6c66575.min.js"></script>
      
    
  </body>
</html>