



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="./image/logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-2.9.2">
    
    
      
        <title>Overview - MongoDB Plugin</title>
      
    
    
      <link rel="stylesheet" href="./assets/stylesheets/application.fbb7f3af.css">
      
      
    
    
      <script src="./assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Helvetica+Neue:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Helvetica Neue","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="./assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#overview" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="" title="MongoDB Plugin" class="md-header-nav__button md-logo">
          
            <img src="./image/delphix-logo-white.png" width="153" height="15">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                MongoDB Plugin
              </span>
              <span class="md-header-nav__topic">
                Overview
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/delphix/mongo-plugin/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Github
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="./image/delphix-logo-white.png" width="48" height="48">
      
    </span>
    MongoDB Plugin
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/delphix/mongo-plugin/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Github
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="index.html" title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ingestion-types" title=" Ingestion Types:" class="md-nav__link">
     Ingestion Types:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#seed" title="Seed" class="md-nav__link">
    Seed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodump-offlinemongodump" title="Mongodump (offlinemongodump)" class="md-nav__link">
    Mongodump (offlinemongodump)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodump-onlinemongodump" title="Mongodump (onlinemongodump)" class="md-nav__link">
    Mongodump (onlinemongodump)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extended-cluster-extendedcluster" title="Extended Cluster (extendedcluster)" class="md-nav__link">
    Extended Cluster (extendedcluster)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongo-ops-manager-backups-sharded-mongo" title="Mongo OPS Manager backups (sharded mongo)" class="md-nav__link">
    Mongo OPS Manager backups (sharded mongo)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongo-ops-manager-backups-non-sharded-mongo-replicaet" title="Mongo OPS Manager backups (non-sharded mongo replicaet)" class="md-nav__link">
    Mongo OPS Manager backups (non-sharded mongo replicaet)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staging-push-mongo-ops-manager-with-automation-stagingpush" title="Staging Push ( Mongo OPS Manager with Automation ) (stagingpush)" class="md-nav__link">
    Staging Push ( Mongo OPS Manager with Automation ) (stagingpush)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" title="Architecture" class="md-nav__link">
    Architecture
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consolidated-seed-extended-cluster-offlineonline-mongodump-mongo-atlas-non-sharded-ingestion-types" title="Consolidated Seed, Extended Cluster, Offline/Online mongodump, Mongo Atlas, Non-Sharded Ingestion Types" class="md-nav__link">
    Consolidated Seed, Extended Cluster, Offline/Online mongodump, Mongo Atlas, Non-Sharded Ingestion Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sharded-mongo-ingestion-type" title="Sharded Mongo Ingestion Type" class="md-nav__link">
    Sharded Mongo Ingestion Type
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-port-requirements" title="Network Port requirements" class="md-nav__link">
    Network Port requirements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphix-network-architecture" title="Delphix Network Architecture" class="md-nav__link">
    Delphix Network Architecture
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-matrix" title="Support Matrix" class="md-nav__link">
    Support Matrix
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mongo-instance-os-support-matrix" title="Mongo Instance / OS Support Matrix" class="md-nav__link">
    Mongo Instance / OS Support Matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#engine-compatibility-matrix" title="Engine Compatibility Matrix" class="md-nav__link">
    Engine Compatibility Matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongo-version-compatability-across-delphix-environments" title="Mongo Version compatability across delphix environments" class="md-nav__link">
    Mongo Version compatability across delphix environments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source-requirements" title="Source Requirements" class="md-nav__link">
    Source Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staging-requirements" title="Staging Requirements" class="md-nav__link">
    Staging Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-requirements" title="Target Requirements" class="md-nav__link">
    Target Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Installation.html" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Discovery.html" title="Discovery" class="md-nav__link">
      Discovery
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Linking.html" title="Linking" class="md-nav__link">
      Linking
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Provisioning.html" title="Provisioning" class="md-nav__link">
      Provisioning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Release%20Notes.html" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Troubleshooting.html" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ingestion-types" title=" Ingestion Types:" class="md-nav__link">
     Ingestion Types:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#seed" title="Seed" class="md-nav__link">
    Seed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodump-offlinemongodump" title="Mongodump (offlinemongodump)" class="md-nav__link">
    Mongodump (offlinemongodump)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodump-onlinemongodump" title="Mongodump (onlinemongodump)" class="md-nav__link">
    Mongodump (onlinemongodump)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extended-cluster-extendedcluster" title="Extended Cluster (extendedcluster)" class="md-nav__link">
    Extended Cluster (extendedcluster)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongo-ops-manager-backups-sharded-mongo" title="Mongo OPS Manager backups (sharded mongo)" class="md-nav__link">
    Mongo OPS Manager backups (sharded mongo)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongo-ops-manager-backups-non-sharded-mongo-replicaet" title="Mongo OPS Manager backups (non-sharded mongo replicaet)" class="md-nav__link">
    Mongo OPS Manager backups (non-sharded mongo replicaet)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staging-push-mongo-ops-manager-with-automation-stagingpush" title="Staging Push ( Mongo OPS Manager with Automation ) (stagingpush)" class="md-nav__link">
    Staging Push ( Mongo OPS Manager with Automation ) (stagingpush)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" title="Architecture" class="md-nav__link">
    Architecture
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consolidated-seed-extended-cluster-offlineonline-mongodump-mongo-atlas-non-sharded-ingestion-types" title="Consolidated Seed, Extended Cluster, Offline/Online mongodump, Mongo Atlas, Non-Sharded Ingestion Types" class="md-nav__link">
    Consolidated Seed, Extended Cluster, Offline/Online mongodump, Mongo Atlas, Non-Sharded Ingestion Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sharded-mongo-ingestion-type" title="Sharded Mongo Ingestion Type" class="md-nav__link">
    Sharded Mongo Ingestion Type
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-port-requirements" title="Network Port requirements" class="md-nav__link">
    Network Port requirements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphix-network-architecture" title="Delphix Network Architecture" class="md-nav__link">
    Delphix Network Architecture
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-matrix" title="Support Matrix" class="md-nav__link">
    Support Matrix
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mongo-instance-os-support-matrix" title="Mongo Instance / OS Support Matrix" class="md-nav__link">
    Mongo Instance / OS Support Matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#engine-compatibility-matrix" title="Engine Compatibility Matrix" class="md-nav__link">
    Engine Compatibility Matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongo-version-compatability-across-delphix-environments" title="Mongo Version compatability across delphix environments" class="md-nav__link">
    Mongo Version compatability across delphix environments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source-requirements" title="Source Requirements" class="md-nav__link">
    Source Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staging-requirements" title="Staging Requirements" class="md-nav__link">
    Staging Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-requirements" title="Target Requirements" class="md-nav__link">
    Target Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/delphix/mongo-plugin/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>MongoDB plugin helps to virtualize mongoDB data source leveraging the following built-in mongoDB technologies:</p>
<p>Supported Backup Mechanisms:</p>
<ul>
<li><strong>New Instance</strong>     : Delphix creates new mongo instances when there is no source associated for ingestion.</li>
<li><strong>Mongodump</strong>        : Export source data and import into Staging mongo instance (dSource). Useful for offline/online backups of small databases (onprem, Saas, MongoAtlas)</li>
<li><strong>Replication</strong>      : Add replicaset member to existing cluster.</li>
<li><strong>Mongo Ops Manager</strong>: Use existing backups downloaded as compressed file(s) from Mongo OPS Manager.</li>
</ul>
<h4 id="ingestion-types"><a id="Ingestion_Types"></a> Ingestion Types:<a class="headerlink" href="#ingestion-types" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th align="left">dSource Type</th>
<th align="left">Mechanism</th>
<th align="center">Zero Touch Prod</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Seed</td>
<td align="left">New Mongo Instance</td>
<td align="center">-</td>
<td align="left">New empty mongo instance created by delphix. This is for development purpose without any source</td>
</tr>
<tr>
<td align="left">extendedcluster</td>
<td align="left">Add member to existing replicaset</td>
<td align="center">N</td>
<td align="left">Add member to existing source replicaset. Instant and near realtime snapshots</td>
</tr>
<tr>
<td align="left">onlinemongodump</td>
<td align="left">mongodump</td>
<td align="center">N</td>
<td align="left">Delphix connects to source from staging environments, executes mongodump and capture source data.</td>
</tr>
<tr>
<td align="left">offlinemongodump</td>
<td align="left">mongodump</td>
<td align="center">Y</td>
<td align="left">Delphix leverages existing mongodumps made available to staging host. Supports backups taken using "mongodump --oplog --gzip -o &lt; bkp_dir &gt;" command</td>
</tr>
<tr>
<td align="left">shardedsource</td>
<td align="left">Mongo OPS Manager Backups</td>
<td align="center">Y</td>
<td align="left">Delphix leverages existing mongo ops manager backups of sharded source as backup files presented to staging host</td>
</tr>
<tr>
<td align="left">nonshardedsource</td>
<td align="left">Mongo OPS Manager Backups</td>
<td align="center">Y</td>
<td align="left">Delphix leverages existing mongo ops manager backups of non sharded source as backup files presented to staging host</td>
</tr>
<tr>
<td align="left">stagingpush</td>
<td align="left">User created mongo instance</td>
<td align="center">Y/N</td>
<td align="left">New empty mongo instance created by user or mongo ops manager automation. User responsible to create working mongo instance on staging host</td>
</tr>
</tbody>
</table>
<h3 id="seed"><a id="Seed"></a>Seed<a class="headerlink" href="#seed" title="Permanent link">&para;</a></h3>
<p>This type of dSource is generally used for pure development purpose. There is no source instance associated with it. It creates a empty instance which is managed by delphix and helps to create virtual mongo instance to avail benefits of all delphix features.</p>
<h3 id="mongodump-offlinemongodump"><a id="Mongodump_offline"></a>Mongodump (offlinemongodump)<a class="headerlink" href="#mongodump-offlinemongodump" title="Permanent link">&para;</a></h3>
<p>This type of dsource is created using mongodump backup file of source mongo instance. It helps to create dsource using zero touch production. Periodic backups can be loaded to create timeline of dsource.</p>
<h3 id="mongodump-onlinemongodump"><a id="Mongodump_online"></a>Mongodump (onlinemongodump)<a class="headerlink" href="#mongodump-onlinemongodump" title="Permanent link">&para;</a></h3>
<p>This type of dsource is created using mongodump backup file of source mongo instance. It helps to create dsource using online backup. It can run in regular mode or logsync mode. logsync mode helps to capture oplogs for incremental snapsyncs and reduce backup time and size. Periodic backups can be loaded to create timeline of dsource.</p>
<h3 id="extended-cluster-extendedcluster"><a id="online_replicaset"></a>Extended Cluster (extendedcluster)<a class="headerlink" href="#extended-cluster-extendedcluster" title="Permanent link">&para;</a></h3>
<p>This type of dsource is created by adding secondary member to existing source cluster. This member does not participate in voting and never becomes primary nor serves any read operations. Its the fastest way of capturing incremental and multiple snapshots can be taken to get desired timeline.</p>
<h3 id="mongo-ops-manager-backups-sharded-mongo"><a id="opsmgr_sharded"></a>Mongo OPS Manager backups (sharded mongo)<a class="headerlink" href="#mongo-ops-manager-backups-sharded-mongo" title="Permanent link">&para;</a></h3>
<p>This type of dsource is created using backup file of source mongo instance created by mongo ops manager. It helps to create dsource of sharded source cluster. It helps to create dsource using zero touch production. Periodic backups can be loaded to create timeline of dsource.</p>
<h3 id="mongo-ops-manager-backups-non-sharded-mongo-replicaet"><a id="opsmgr_nonsharded"></a>Mongo OPS Manager backups (non-sharded mongo replicaet)<a class="headerlink" href="#mongo-ops-manager-backups-non-sharded-mongo-replicaet" title="Permanent link">&para;</a></h3>
<p>This type of dsource is created using backup file of source mongo instance created by mongo ops manager. It helps to create dsource of non-sharded source cluster. It helps to create dsource using zero touch production. Periodic backups can be loaded to create timeline of dsource.</p>
<h3 id="staging-push-mongo-ops-manager-with-automation-stagingpush"><a id="stagingpush"></a>Staging Push ( Mongo OPS Manager with Automation ) (stagingpush)<a class="headerlink" href="#staging-push-mongo-ops-manager-with-automation-stagingpush" title="Permanent link">&para;</a></h3>
<p>This type of dsource is similar to extended cluster. When Mongo Ops Manager is configured with automation, it does not allow any cluster modification commands outside Mongo Ops Manager. When creating dsource of staging push type, delphix creates an empty filesystem on staging host. You can create mongo instance using Mongo Ops Manager on delphix filesystem and take new delphix snapshot. Delete any previous snapshot generateed before creating mongo instance. Delphix will take periodic snapshots based on snapsync policy which can be used to create VDBs.</p>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<h4 id="consolidated-seed-extended-cluster-offlineonline-mongodump-mongo-atlas-non-sharded-ingestion-types">Consolidated Seed, Extended Cluster, Offline/Online mongodump, Mongo Atlas, Non-Sharded Ingestion Types<a class="headerlink" href="#consolidated-seed-extended-cluster-offlineonline-mongodump-mongo-atlas-non-sharded-ingestion-types" title="Permanent link">&para;</a></h4>
<p><img alt="Screenshot" src="image/consolidated_architectures.png" /></p>
<h4 id="sharded-mongo-ingestion-type">Sharded Mongo Ingestion Type<a class="headerlink" href="#sharded-mongo-ingestion-type" title="Permanent link">&para;</a></h4>
<p><img alt="Screenshot" src="image/sharded_architecture.png" /></p>
<h2 id="network-port-requirements">Network Port requirements<a class="headerlink" href="#network-port-requirements" title="Permanent link">&para;</a></h2>
<h4 id="delphix-network-architecture">Delphix Network Architecture<a class="headerlink" href="#delphix-network-architecture" title="Permanent link">&para;</a></h4>
<p><img alt="Screenshot" src="image/mongo_networkports.png" /></p>
<h2 id="support-matrix">Support Matrix<a class="headerlink" href="#support-matrix" title="Permanent link">&para;</a></h2>
<h3 id="mongo-instance-os-support-matrix"><a id="support matrix"></a>Mongo Instance / OS Support Matrix<a class="headerlink" href="#mongo-instance-os-support-matrix" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th align="left">Mongo Versions</th>
<th align="left">RHEL 6.4</th>
<th align="center">RHEL 7.4</th>
<th align="left">RHEL 7.9</th>
<th align="left">Windows x.x</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">mongoDB 4.2</td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/error.svg" /></td>
</tr>
<tr>
<td align="left">mongoDB 4.4</td>
<td align="left">-</td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/error.svg" /></td>
</tr>
<tr>
<td align="left">mongoDB 4.2(sharded)</td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/error.svg" /></td>
</tr>
<tr>
<td align="left">mongoDB 4.4(sharded)</td>
<td align="left">-</td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/error.svg" /></td>
</tr>
</tbody>
</table>
<h3 id="engine-compatibility-matrix"><a id="engine_compatibility_matrix"></a>Engine Compatibility Matrix<a class="headerlink" href="#engine-compatibility-matrix" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th align="left">Engine Versions</th>
<th align="left">Mongo 4.0.x</th>
<th align="left">Mongo 4.2.x</th>
<th align="left">Mongo 4.4.x</th>
<th align="center">Mongo 4.4.2</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">5.2.x.x</td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
</tr>
<tr>
<td align="left">5.3.5.x</td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
</tr>
<tr>
<td align="left">6.0.2.x</td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
</tr>
<tr>
<td align="left">&gt;6.0.3.x - 6.0.10.0</td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="left"><img alt="Screenshot" src="image/check.svg" /></td>
<td align="center"><img alt="Screenshot" src="image/check.svg" /></td>
</tr>
</tbody>
</table>
<ul>
<li>Engine 5.2.x.x - 5.3.4.0 supported with legacy plugin ( mongo 4.4.2 )  </li>
<li>Engine 5.3.5.0 - 6.0.10.0 supported with current plugin ( mongopy 0.0.9 )  </li>
</ul>
<h3 id="mongo-version-compatability-across-delphix-environments"><a id="mongo_version_environment_compatibility_matrix"></a>Mongo Version compatability across delphix environments<a class="headerlink" href="#mongo-version-compatability-across-delphix-environments" title="Permanent link">&para;</a></h3>
<ul>
<li>Mongo binaries in all environments ( staging and target ) should be of same version for dSource Type: Seed</li>
<li>Mongo binaries in all environments ( source, staging and target ) should be of same version for dSource Type: extendedcluster, nonshardedmongo, shardedmongo and stagingpush</li>
<li>Mongo binaries can be of same or higher version than source in staging environment for offlinemongodump, onlinemongodump </li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<h3 id="source-requirements"><a id="source requirements-plugin"></a>Source Requirements<a class="headerlink" href="#source-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li>Access to Source SSL Certificate (if applicable)  </li>
<li>Access to KMIP Credentials (if applicable)  </li>
<li>Access to Encryption KeyFile (if applicable)  </li>
<li>Backup files from Mongo Ops Manager / Offline mongodump presented to Staging host.</li>
</ul>
<p><strong><em>Database user with following privileges ( for extendedcluster dSource type ) </em></strong><br />
- clusterAdmin<br />
- changeOwnPasswordRole  </p>
<div class="codehilite"><pre><span></span><code>use admin
db.createRole<span class="o">(</span>
   <span class="o">{</span> role: <span class="s2">&quot;changeOwnPasswordRole&quot;</span>,
     privileges: <span class="o">[</span>
        <span class="o">{</span>
          resource: <span class="o">{</span> db: <span class="s2">&quot;&quot;</span>, collection: <span class="s2">&quot;&quot;</span><span class="o">}</span>,
          actions: <span class="o">[</span> <span class="s2">&quot;changeOwnPassword&quot;</span> <span class="o">]</span>
        <span class="o">}</span>
     <span class="o">]</span>,
     roles: <span class="o">[]</span>
   <span class="o">}</span>
<span class="o">)</span>
db.createUser<span class="o">({</span>user: <span class="s2">&quot;clusteradmin&quot;</span>,pwd: <span class="s2">&quot;xxxxxx&quot;</span>, roles: <span class="o">[</span><span class="s2">&quot;clusterAdmin&quot;</span>,<span class="s2">&quot;changeOwnPasswordRole&quot;</span><span class="o">]})</span>
</code></pre></div>

<p><strong><em>Database user with following privileges ( for onlinemongodump dSource type ) </em></strong>  </p>
<div class="codehilite"><pre><span></span><code>use admin 
db.createUser({user: &quot;clusteradmin&quot;,pwd: &quot;xxxxxx&quot;, roles: [&quot;clusterAdmin&quot;,&quot;backup&quot;]})
</code></pre></div>

<h3 id="staging-requirements"><a id="staging requirements-plugin"></a>Staging Requirements<a class="headerlink" href="#staging-requirements" title="Permanent link">&para;</a></h3>
<p><strong><em>O/S user with following privileges</em></strong></p>
<ul>
<li>Regular o/s user with primary group as mongod.  </li>
<li>Execute access on mongo/mongod binaries  </li>
<li>mongo and mongod binaries to be in same folder [ if required create softlink ]  </li>
<li>Empty folder on host to hold delphix toolkit  [ approximate 2GB free space ]  </li>
<li>Empty folder on host to mount nfs filesystem. This is just an empty folder with no space requirements and act as base folder for nfs mounts.  </li>
<li>Access to source instance backup file(s) from Staging host logged as delphix user (applicable for mongo ops mgr / offline mongodump use case).  </li>
<li>sudo privileges for mount, umount. See sample below assuming <code>delphix_os</code> is used as delphix user.  </li>
</ul>
<div class="codehilite"><pre><span></span><code>Defaults:delphixos !requiretty
delphixos <span class="nv">ALL</span><span class="o">=</span>NOPASSWD: <span class="se">\</span>
/bin/mount, /bin/umount
</code></pre></div>

<h3 id="target-requirements"><a id="target requirements-plugin"></a>Target Requirements<a class="headerlink" href="#target-requirements" title="Permanent link">&para;</a></h3>
<p><strong><em>O/S user with following privileges</em></strong>  </p>
<ul>
<li>Regular o/s user with primary group as mongod.  </li>
<li>Execute access on mongo/mongod binaries  </li>
<li>mongo and mongod binaries to be in same folder [ if required create softlink ]  </li>
<li>Empty folder on host to hold delphix toolkit  [ approximate 2GB free space ]  </li>
<li>Empty folder on host to mount nfs filesystem. This is just an empty folder with no space requirements and act as base folder for nfs mounts.  </li>
<li>sudo privileges for mount, umount. See sample below assuming <code>delphix_os</code> is used as delphix user.  </li>
</ul>
<div class="codehilite"><pre><span></span><code>Defaults:delphixos !requiretty
delphixos <span class="nv">ALL</span><span class="o">=</span>NOPASSWD: <span class="se">\</span>
/bin/mount
</code></pre></div>

<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h2>
<ul>
<li>V2P not supported</li>
<li>Password Vault not supported</li>
<li>PITR not supported</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="Installation.html" title="Installation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Installation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Delphix Corp.
          </div>
        
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="./assets/fonts/font-awesome.css">
    
      <a href="https://www.delphix.com/" class="md-footer-social__link fa fa-sitemap"></a>
    
      <a href="https://www.facebook.com/DelphixCorp/" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://twitter.com/delphix" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/delphix" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://github.com/delphix" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="./assets/javascripts/application.878fdd8d.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-35429885-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>